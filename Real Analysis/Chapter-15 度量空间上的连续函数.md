上一章，我们研究了度量空间 $(X,d)$ 以及其上的不同子集。在本章中，我们将研究两个度量空间 $(X,d_{X}),(Y,d_{Y})$ 以及函数 $f\colon X\to Y$，特别地，我们将研究度量空间之间的**连续函数**，它是做进一步的分析的基础。

# Section 1: 函数极限

在定义连续函数之前，我们首先要把实数上的函数极限推广至一般的度量空间中，我们从极限点开始。

**定义 15.1.1** 极限点（limit point），孤立点（isolated point）

设 $(X,d)$ 是度量空间，$E\subset X$，称 $x \in X$ 是 $E$ 的一个**极限点**，如果 $x$ 是 $E\setminus \{ x \}$ 的附着点。$E$ 中不是极限点的元素称为 $E$ 的**孤立点**。

**定义 15.1.2** 函数极限（functional limit）

设 $(X,d_{X}),(Y,d_{Y})$ 是度量空间，$E\subset X$，函数 $f\colon X\to Y$，$x_{0}\in X$ 是 $E$ 的一个极限点，$L \in Y$，称 $f$ 在 $x_{0}$ 处**沿着** $E$ **收敛于** $L$，如果对任意 $\varepsilon>0$，存在 $\delta>0$ 使得对任意满足 $0<d_{X}(x,x_{0})<\delta$ 的 $x \in E$ 有 $d_{Y}(f(x),L)<\varepsilon$，记作

$$
\lim_{ x \to x_{0};x \in E } f(x)=L
$$

注意，上述定义中的 $f$ 实际上应该定义在 $X$ 的某个子空间上，从而使其能够包括 $f$ 在 $x_{0}$ 处无定义的情况。但实际应用中我们通常会在无定义点处为函数重新赋值（通常发生在可去间断点处），因此这不会造成严重的错误。

与序列极限类似，实值函数极限的许多定理都可以轻松地推广至度量空间上的函数极限。

**定理 15.1.3** Heine 定理

设 $(X,d_{X}),(Y,d_{Y})$ 是度量空间，$E\subset X$，函数 $f\colon X\to Y$，$x_{0}\in X$ 是 $E$ 的一个极限点，$L \in Y$，则以下命题等价：

1. $f$ 在 $x_{0}$ 处沿着 $E$ 收敛于 $L$
2. 对任意 $E\setminus \{ x_{0} \}$ 中按度量 $d_{X}$ 收敛于 $x_{0}$ 的序列 $(x^{(n)})$，序列 $(f(x^{(n)}))$ 按度量 $d_{Y}$ 收敛于 $L$

上述定理的证明与定理 9.2.2 的证明几乎是相同的，因为我们在证明前面这些命题的时候就有意识地使用了度量的语言。

Heine 定理表明，函数在某点处收敛实际上是一个相当强的条件。以 $\mathbb{R}^{2}\setminus \{ (0,0) \}\to \mathbb{R}$ 的函数 $(x,y)\mapsto \dfrac{xy}{x^{2}+y^{2}}$ 为例，它在 $(0,0)$ 处有没有极限呢？我们可以这样考虑：在直线 $y=mx$ 上取一个收敛于 $(0,0)$ 的点列，那么

$$
\lim_{ n \to \infty } \dfrac{x_{n}y_{n}}{x_{n}^{2}+y_{n}^{2}}=\lim_{ n \to \infty } \dfrac{mx_{n}^{2}}{(1+m^{2})x_{n}^{2}}= \dfrac{m}{1+m^{2}}
$$

这一极限与参数 $m$ 有关，而不是一个常数，故函数在 $(0,0)$ 处没有极限。因此，函数在某点处收敛表明，无论点列 $(x_{n})$ 沿着什么路径收敛到 $x_{0}$（直线或曲线），序列 $(f(x_{n}))$ 总是收敛到 $L$.

类似地，我们也可以证明函数极限的唯一性。

**定理 15.1.4**

设 $(X,d_{X}),(Y,d_{Y})$ 是度量空间，$E\subset X$，函数 $f\colon X\to Y$，$x_{0}\in X$ 是 $E$ 的一个极限点，如果 $f$ 在 $x_{0}$ 处沿着 $E$ 收敛于 $L$ 和 $L'$，那么 $L=L'$.

然而，与实值函数不同，在一般的度量空间上，通常没有类似于实数的加法、乘法和序结构，因此定理 9.2.4、9.2.5、9.2.6 无法直接推广到一般度量空间中。不过，如果我们限定陪域 $Y$ 是实数集，那么这些定理仍然成立。

**定理 15.1.5**

设 $(X,d)$ 是度量空间，$E\subset X$，$x_{0}\in X$ 是 $E$ 的极限点，函数 $f\colon X\to \mathbb{R},g\colon X\to \mathbb{R}$ 分别在 $x_{0}$ 处沿着 $E$ 收敛于 $L,M$，那么有：

1. $\lim_{ x \to x_{0};x \in E }(f(x)+g(x))=L+M$
2. $\lim_{ x \to x_{0};x \in E }f(x)g(x)=LM$
3. 如果对任意 $x \in E\setminus \{ x_{0} \}$ 有 $g(x)\neq 0$ 且 $M\neq 0$，则 $\lim_{ x \to x_{0}; x \in E }g(x)^{-1}=M^{-1}$
4. 如果对任意 $x \in E\setminus \{ x_{0} \}$ 有 $f(x)\leq g(x)$，则 $L\leq M$

**定理 15.1.6** 挤压定理（squeeze theorem）

设 $(X,d)$ 是度量空间，$E\subset X$，$x_{0}\in X$ 是 $E$ 的极限点，$f,g,h$ 都是 $X\to \mathbb{R}$ 的函数，$\lim_{ x \to x_{0};x \in E }f(x)=\lim_{ x \to x_{0};x \in E }h(x)=L$，并且对任意 $x \in E\setminus\{ x_{0} \}$ 有 $f(x)\leq g(x)\leq h(x)$，那么 $\lim_{ x \to x_{0};x \in E }g(x)=L$.

上述定理的证明与实函数的相应定理的证明并无不同，这里就不再重复了。

在度量空间中，函数极限有一些新的性质，它们涉及开集。

**定理 15.1.7**

设 $(X,d_{X}),(Y,d_{Y})$ 是度量空间，$E\subset X$，函数 $f\colon X\to Y$，$x_{0}\in X$ 是 $E$ 的一个极限点，$L \in Y$，则以下命题等价：

1. $f$ 在 $x_{0}$ 处沿着 $E$ 收敛于 $L$
2. 对任意包含 $L$ 的开集 $V\subset Y$，都存在包含 $x_{0}$ 的开集 $U\subset X$ 使得 $f[(U\cap E)\setminus \{ x_{0} \}]\subset V$

**证明**

首先设 1 成立，任取一个包含 $L$ 的开集 $V \subset Y$，根据开集的性质，存在一个 $\varepsilon>0$ 使得 $B_{(Y,d_{Y})}(L,\varepsilon)\subset V$，根据极限的定义，存在 $\delta>0$ 使得对任意 $0<d_{X}(x,x_{0})<\delta$ 的 $x \in E$ 有 $f(x) \in B_{(Y,d_{Y})}(L,\varepsilon)\subset V$，这样的 $x$ 构成的集合为 $(B_{(X,d_{X})}(x_{0},\delta)\cap E)\setminus\{ x_{0} \}$，这就证明了 2.

现在设 2 成立，那么任取 $\varepsilon>0$，那么 $V=B_{(Y,d_{Y})}(L,\varepsilon)$ 是一个包含 $L$ 的开集，从而存在包含 $x_{0}$ 的开集 $U$ 使得 $f[(U\cap E)\setminus \{ x_{0} \}]\subset V$，根据开集的性质，存在 $\delta>0$ 使得 $B_{(X,d_{X})}(x_{0},\delta)\subset U$，这就表明对任意满足 $0<d_{X}(x,x_{0})<\delta$ 的 $x \in E$ 有 $f(x) \in V$，这就完成了证明。

# Section 2: 连续函数

现在我们就可以将连续性的概念推广至度量空间上。

**定义 15.2.1** 连续（continuous）

设 $(X,d_{X}),(Y,d_{Y})$ 是度量空间，函数 $f\colon X\to Y$，$x_{0}\in X$，如果

$$
\lim_{ x \to x_{0}; x \in X } f(x)=f(x_{0})
$$

则称 $f$ 在 $x_{0}$ 处**连续**。如果对任意 $x \in X$ 都有 $f$ 在 $x$ 处连续，则称 $f$ 是一个**连续函数**。

利用函数极限的性质，我们可以得到以下定理：

**定理 15.2.2**

设 $(X,d_{X}),(Y,d_{Y})$ 是度量空间，函数 $f\colon X\to Y$，$x_{0}\in X$，那么以下命题等价：

1. $f$ 在 $x_{0}$ 处连续。
2. 对任意 $X$ 中按度量 $d_{X}$ 收敛于 $x_{0}$ 的序列 $(x^{(n)})$，序列 $(f(x^{(n)}))$ 按度量 $d_{Y}$ 收敛于 $f(x_{0})$.
3. 对任意包含 $f(x_{0})$ 的开集 $V\subset Y$，都存在包含 $x_{0}$ 的开集 $U\subset X$ 使得 $f[U]\subset V$.

注意，在考虑函数的连续性时，我们不会把 $x=x_{0}$ 排除在外，因为当 $x=x_{0}$ 时条件 $d(f(x),f(x_{0}))<\varepsilon$ 总是满足的。

连续函数的另一个重要性质也与开集有关。

**定理 15.2.3**

设 $(X,d_{X}),(Y,d_{Y})$ 是度量空间，函数 $f\colon X\to Y$，则以下命题等价：

1. $f$ 是连续函数。
2. 对任意开集 $V\subset Y$，原像 $f^{-1}[V]$ 也是开集。
3. 对任意闭集 $K\subset Y$，原像 $f^{-1}[K]$ 也是闭集。

**证明**

首先我们证明 $1 \iff 2$，设 $f$ 是连续的，$V\subset Y$ 是一个开集，如果 $f^{-1}[V]=\varnothing$，那么它显然是开集，现设 $f^{-1}[V]\neq \varnothing$. 设 $x \in f^{-1}[V]$，则 $f(x)\in V$，由于 $f$ 在 $x$ 处连续，故存在包含 $x$ 的开集 $U$ 使得 $f[U]\subset V$，即 $U \subset f^{-1}[V]$，从而 $f^{-1}[V]$ 是开集。

反之，设 $x_{0}\in X$，任取一个包含 $f(x_{0})$ 的开集 $V$，则 $f^{-1}[V]$ 也是开集，从而存在包含 $x_{0}$ 的开集 $U$ 使得 $U\subset f^{-1}[V]$，即 $f[U]\subset V$，这表明 $f$ 在 $x_{0}$ 处连续。

下面证明 $2 \iff 3$，先设 2 成立，设 $K\subset Y$ 是闭集，则 $Y\setminus K$ 是开集，从而 $f^{-1}[Y\setminus K]$ 是开集，由于

$$
f^{-1}[Y\setminus K]=f^{-1}[Y]\setminus f^{-1}[K]=X\setminus f^{-1}[K]
$$

故 $f^{-1}[K]$ 是闭集。$3\implies 2$ 同理可证。

连续性保证了开集的原像是开集，但它不能保证开集的前像是开集（考虑函数 $x\mapsto x^{3}-3x$ 在原点附近的行为）。

下面的定理表明连续函数的复合仍然是连续函数。

**定理 15.2.4**

设 $(X,d_{X}),(Y,d_{Y}),(Z,d_{Z})$ 是度量空间，函数 $f\colon X\to Y$ 在 $x_{0} \in X$ 处连续，$g\colon Y\to Z$ 在 $f(x_{0})$ 处连续，那么函数 $g\circ f$ 在 $x_{0}$ 处连续。

其证明与定理 9.3.6 的证明是一致的。

和之前一样，在一般的度量空间上没有加法、乘法和序结构，然而，如果令 $Y=\mathbb{R}$，那么定理 9.3.3 对于度量空间上的函数 $f\colon X\to \mathbb{R}$ 仍然成立。

不过，当我们扩张到更大的空间（比如 $\mathbb{R}^{n}$ ）时，我们可以得到比单纯的加法、乘法更丰富的结果，为了证明这些函数的连续性，我们给出以下结果：

**定理 15.2.5**

设 $(X,d)$ 是度量空间，函数 $f\colon X\to \mathbb{R}^{m},g\colon X\to \mathbb{R}^{n}$，定义 $f$ 与 $g$ 的**直和** $f \oplus g\colon X\to \mathbb{R}^{m+n}$ 为

$$
f \oplus g(x)=(f(x),g(x))
$$

那么 $f,g$ 在 $x_{0}\in X$ 处连续，当且仅当 $f \oplus g$ 在 $x_{0}$ 处连续。

**证明**

设 $f,g$ 在 $x_{0}$ 处连续，则取 $X$ 中收敛于 $x_{0}$ 的序列 $(x^{(n)})$，序列 $(f(x^{(n)}))$ 和 $(g(x^{(n)}))$ 分别收敛于 $(x_{1},\dots,x_{m})$ 和 $(y_{1},\dots,y_{n})$，根据定理 14.1.8，这表明 $f(x^{(n)})=(a_{1}^{(n)},\dots,a_{m}^{(n)})$ 的每个分量 $a_{j}^{(n)}$ 收敛于 $x_{j}$，对 $g$ 也是一样，因此有

$$
\lim_{ n \to \infty } f\oplus g(x^{(n)})=(x_{1},\dots,x_{m},y_{1},\dots,y_{n})=f\oplus g(x_{0})
$$

即 $f\oplus g$ 在 $x_{0}$ 处连续。反之也同理。

利用定理 15.2.5，再搭配定理 15.2.4，我们就可以证明一大类函数的连续性。比如，由于加法函数 $(x,y)\mapsto x+y$ 是连续的，因此两个 $X\to \mathbb{R}$ 的连续函数 $f,g$ 的和 $f+g$ 就是连续的：$f+g$ 就是 $f\oplus g$ 与加法函数的复合。

另一个例子是**投影函数** $\pi_{1}(x,y)=x,\pi_{2}(x,y)=y$，它们是连续的，由此，再根据加法和乘法是连续的事实，我们可以证明**二元多项式** $P\colon \mathbb{R}^{2}\to \mathbb{R}$ 定义为

$$
P(x,y)=\sum_{i=0}^{n} \sum_{j=0}^{m} c_{ij}x^{i}y^{j}
$$

是连续的。进而有 $P(f,g)$ 连续，如果 $f,g$ 是连续函数。

# Section 3: 紧致性与连通性

我们在实值函数理论中已经看到，定义在闭区间上的连续函数有许多非常好的性质。作为闭区间的一种推广，我们现在来研究定义在紧致集上的连续函数，我们有如下结果：

**定理 15.3.1**

设 $(X,d_{X}),(Y,d_{Y})$ 是度量空间，函数 $f\colon X\to Y$ 是连续函数，$K\subset X$ 是紧致的，那么 $f[K]$ 也是紧致的。

**证明**

任取 $f[K]$ 中的序列 $(y^{(n)})$，则对于每个 $y^{(n)}$，都存在 $x \in K$ 使得 $f(x)=y^{(n)}$，从中取出一个记为 $x^{(n)}$，那么我们就得到了 $K$ 中的序列 $(x^{(n)})$. 由于 $K$ 是紧致的，故 $(x^{(n)})$ 有一个收敛于 $x_{0}\in K$ 的子序列 $(x^{(n_{j})})$，根据 $f$ 的连续性，序列 $f(x^{(n_{j})})=y^{(n_{j})}$ 收敛于 $f(x_{0})\in f[K]$，因此 $f[K]$ 是紧致的。

由该定理我们可以证明以下结论：

**定理 15.3.2** 最值定理（extreme value theorem）

设 $(X,d)$ 是紧致度量空间，函数 $f\colon X\to \mathbb{R}$ 是连续函数，那么 $f$ 在某点 $x_{\mathrm{max}}\in X$ 达到最大值，在某点 $x_{\mathrm{min}}\in X$ 达到最小值。

**证明**

根据定理 15.3.1，集合 $f[X]$ 是紧致的，根据定理 14.4.4 知 $f[X]$ 是有界的，从而有 $m=\sup f[X]$，根据上确界的性质，集族

$$
\left\{  x \in X \mid m-\dfrac{1}{n}<f(x)\leq m  \right\},n \in \mathbb{N}\setminus \{ 0 \}
$$

均非空，从中取出序列 $(x^{(n)})_{n=1}^{\infty}$，于是它有一个收敛于 $x_{m}$ 的子序列 $(x^{(n_{j})})_{j=1}^{\infty}$，满足

$$
m\geq f(x^{(n_{j})})>m- \dfrac{1}{n_{j}}\geq m-\dfrac{1}{j}
$$

则 $f(x_{m})=\lim_{ j \to \infty }f(x^{(n_{j})})=m$，这就完成了证明。最小值同理。

紧致集上的连续函数还有一个性质：它是一致连续的。

**定义 15.3.3** 一致连续（uniformly continuous）

设 $(X,d_{X}),(Y,d_{Y})$ 是度量空间，函数 $f\colon X\to Y$，称 $f$ 是**一致连续**的，如果对任意 $\varepsilon>0$，存在 $\delta>0$ 使得对任意满足 $d_{X}(x',x'')<\delta$ 的 $x',x''\in X$ 有 $d_{Y}(f(x'),f(x''))<\varepsilon$.

每个一致连续函数都是连续的：只需固定一个 $x'$，根据定义我们就知道 $f$ 在 $x'$ 处连续，但反之不成立。但我们可以证明，在紧致集上，这两个概念是等价的。

**定理 15.3.4**

设 $(X,d_{X}),(Y,d_{Y})$ 是度量空间，$X$ 是紧致的，函数 $f\colon X\to Y$ 是连续函数，那么 $f$ 是一致连续的。

**证明**

设 $x\in X$，由于 $f$ 在 $x$ 处连续，故对任意 $\varepsilon>0$，存在 $\delta_{x}>0$ 使得对任意 $x' \in B_{(X,d_{X})}(x,\delta_{x})$ 有 $d_{Y}(f(x'),f(x))<\varepsilon$，现在构造 $X$ 的开覆盖

$$
\left\{  B_{(X,d_{X})}\left( x,\dfrac{\delta_{x}}{2} \right) \mid x \in X  \right\}
$$

由 $X$ 的紧致性，可以找到有限个开球 $\{ B(x_{1},\delta_{x_{1}} / 2),\dots,B(x_{n},\delta_{x_{n}} / 2) \}$ 使其覆盖 $X$，现在令 $\delta=\min_{1\leq j\leq n} \dfrac{\delta_{x_{j}}}{2}$，并且设 $d_{X}(x',x'')<\delta$，那么存在一个 $x_{j}$ 使得 $x' \in B(x_{j},\delta_{x_{j}} / 2)$，并且

$$
d_{X}(x'',x_{j})\leq d_{X}(x'',x')+d_{X}(x',x_{j})<\delta_{x_{j}}
$$

从而

$$
d_{Y}(f(x'),f(x''))\leq d_{Y}(f(x'),f(x_{j}))+d_{Y}(f(x_{j}),f(x''))<2\varepsilon
$$

这就完成了证明。

和之前一样，我们将实值一致连续函数的性质推广到度量空间上。

**定理 15.3.5**

设 $(X,d_{X}),(Y,d_{Y})$ 是度量空间，函数 $f\colon X\to Y$，则以下命题等价：

1. $f$ 一致连续。
2. 如果 $X$ 上元素的序列 $(x_{n}'),(x_{n}'')$ 等价，则序列 $(f(x_{n}')),(f(x_{n}''))$ 等价。

**定理 15.3.6**

设 $(X,d_{X}),(Y,d_{Y}),(Z,d_{Z})$ 是度量空间，函数 $f\colon X\to Y,g\colon Y\to Z$ 是一致连续的，那么函数 $g\circ f$ 一致连续。

上述定理的证明与前面的证明一致。

**定理 15.3.7**

设 $(X,d)$ 是度量空间，函数 $f\colon X\to \mathbb{R}^{m},g\colon X\to \mathbb{R}^{n}$ 是一致连续的，当且仅当 $f\oplus g$ 是一致连续的。

**证明**

设 $x',x''\in X$，那么有

$$
d_{l^{1}}(f\oplus g(x'),f\oplus g(x''))=d_{l^{1}}(f(x'),f(x''))+d_{l^{1}}(g(x'),g(x''))
$$

而且

$$
d_{l^{1}}(f(x'),f(x''))\leq d_{l^{1}}(f\oplus g(x'),f\oplus g(x''))
$$

对 $g$ 是类似的，因此 $f,g$ 一致连续当且仅当 $f\oplus g$ 一致连续。

利用定理 15.3.7 以及加法函数 $(x,y)\mapsto x+y$ 是一致连续的事实，我们知道两个一致连续的函数之和是一致连续的。遗憾的是，乘法函数 $(x,y)\mapsto xy$ 在 $\mathbb{R}^{2}$ 上不是一致连续的，因此两个一致连续函数之积不一定是一致连续的。

下面，我们来介绍点集拓扑中的另一个重要概念：连通性。

**定义 15.3.8** 连通的（connected）

设 $(X,d)$ 是度量空间，称 $(X,d)$ 是**不连通的**，如果存在两个不相交的非空开集 $U,V\subset X$ 使得 $U\cup V=X$；称 $(X,d)$ 是**连通的**，如果 $X$ 非空且不是不连通的。

设 $Y\subset X$，如果 $(Y,d_{Y})$ 是连通的（不连通的），则称 $Y$ 是连通的（不连通的）。

注意，空集既不是连通的，也不是不连通的，我们可以认为它是“无连通性的”。

连通性是一个内在性质，它只与度量 $d$ 有关，而与环绕空间无关，就像紧致性一样。

之前，我们在实数上定义了一种不同的连通性概念，现在我们把这两种定义统一起来。

**定理 15.3.9**

设 $X\subset \mathbb{R}$，那么以下命题等价：

1. $X$ 是连通的。
2. 对任意 $x,y \in X,x<y$，区间 $[x,y]\subset X$.
3. $X$ 是一个区间（有界或无界的）。

**证明**

首先证明 $1 \iff 2$，设 $X$ 是连通的，假设存在 $x<y$ 使得 $[x,y]$ 不包含在 $X$ 中，那么存在 $x<z<y$ 使得 $z \not\in X$，因此我们有

$$
X=((-\infty,z)\cap X)\cup((z,+\infty)\cap X)
$$

而右边两个集合都非空，并且相对于 $X$ 是开集（参考定理 14.2.8），故 $X$ 是不连通的，矛盾。

现在设 2 成立，假设 $X$ 是不连通的，那么存在不相交的非空开集 $U,V$ 使得 $X=U\cup V$，取 $x \in U,y \in V$，则 $x\neq y$，不妨设 $x<y$，那么 $[x,y]\subset X$，现在考虑实数 $z=\sup([x,y]\cap U)$，则 $z \in[x,y]\subset X$，从而 $z \in U$ 或者 $z \in V$.

如果 $z \in U$，那么 $z\neq y$，由于 $U$ 是开集，故存在开球 $B_{([x,y],d)}(z,r)\subset U$，但这与 $z=\sup ([x,y]\cap U)$ 矛盾。如果 $z \in V$，那么 $z\neq x$，由于 $V$ 是开集，故存在开球 $B_{([x,y],d)}(z,r)\subset V$，但这同样与 $z=\sup ([x,y]\cap U)$ 矛盾。

下面我们证明 $2 \iff 3$，$3\implies 2$ 是显然的，因此现在假设 2 成立。在定理 12.1.2 中我们已经证明了有界的情况，现在设 $X$ 是无界的。

不妨假设 $X$ 无上界但有下界，取 $a=\inf X$，那么存在 $x_{0} \in X$ 使得 $x_{0}>a$，参考 12.1.2 的证明，我们知道 $(a,x_{0}]\subset X$. 由于 $X$ 无上界，故对任意 $n \in \mathbb{N}$，总存在 $x \in X$ 使得 $x>n$，取出一个记为 $x_{n}$，那么当 $n>x_{0}$ 时有 $x_{n}>x_{0}$，从而 $[x_{0},x_{n}]\subset X$.

现在我们证明 $[x_{0},+\infty)\subset X$，设 $y \in[x_{0},+\infty)$，那么存在 $N \in \mathbb{N}$ 使得 $N>y$，从而有 $y \in[x_{0},x_{N}]\subset X$，因此 $(a,+\infty)\subset X$，从而 $X$ 必定是 $(a,+\infty),[a,+\infty)$ 其中之一，这就完成了证明。

下面的定理表明，连续函数将连通集映射为连通集。

**定理 15.3.10**

设 $(X,d_{X}),(Y,d_{Y})$ 是度量空间，函数 $f\colon X\to Y$ 是连续函数，$E\subset X$ 是连通的，那么 $f[E]$ 也是连通的。

**证明**

函数 $f|_{E}\colon E\to f[E]$ 也是连续函数，假设 $f[E]$ 不连通，那么有不相交的非空开集 $U,V$ 使得 $f[E]=U\cup V$，从而

$$
E=(f|_{E})^{-1}[f[E]]=(f|_{E})^{-1}[U]\cup(f|_{E})^{-1}[V]
$$

由于 $(f|_{E})^{-1}[U],(f|_{E})^{-1}[V]$ 都是非空开集，并且不相交，故 $E$ 不连通，矛盾。

从上述定理可以推出一个重要的结论，即介值定理。

**定理 15.3.11** 介值定理（intermediate value theorem）

设 $(X,d)$ 是连通度量空间，函数 $f\colon X\to \mathbb{R}$ 是连续函数，那么对任意 $a,b \in X$ 以及满足 $f(a)\leq y\leq f(b)$ 或者 $f(b)\leq y\leq f(a)$ 的 $y \in \mathbb{R}$，存在 $c \in X$ 使得 $f(c)=y$.

**证明**

不妨设 $f(a)<y<f(b)$，根据定理 15.3.12，集合 $f[X]\subset \mathbb{R}$ 是连通的，从而 $y \in[f(a),f(b)]\subset f[X]$，即存在 $c \in X$ 使得 $y=f(c)$.

结合最值定理和介值定理，我们得到如下结果：

**定理 15.3.12**

设 $(X,d)$ 是紧致连通度量空间，函数 $f\colon X\to \mathbb{R}$ 是连续函数，$f$ 的最大值和最小值分别为 $M$ 和 $m$，那么 $f[X]=[m,M]$.

最后我们给出连通集的一些性质。

**定理 15.3.13**

设 $(X,d)$ 是度量空间，$\{ E_{i} \}_{i \in I}$ 是 $X$ 中的一族连通子集，并且 $\bigcap_{i \in I}E_{i}\neq \varnothing$，那么 $\bigcup_{i \in I}E_{i}$ 是连通集。

**证明**

假设 $\bigcup_{i \in I}E_{i}$ 不连通，那么有 $\bigcup_{i \in I}E_{i}$ 上的不相交非空开集 $U,V$ 使得 $U\cup V=\bigcup_{i \in I}E_{i}$. 任取 $E_{j}$，集合 $U_{j}=E_{j}\cap U$ 和 $V_{j}=E_{j}\cap V$ 是 $E_{j}$ 上的开集，并且 $U_{j}\cup V_{j}=E_{j},U_{j}\cap V_{j}=\varnothing$，这表明 $U_{j}=\varnothing$ 或者 $V_{j}=\varnothing$，否则将与 $E_{j}$ 的连通性矛盾。

根据上面的分析，我们知道对任意 $E_{j}$，要么 $E_{j}\subset U$，要么 $E_{j}\subset V$，由于 $U,V$ 都是非空的，故存在 $E_{i}\subset U,E_{j}\subset V$，从而 $E_{i}\cap E_{j}=\varnothing$，这与 $\bigcap_{i \in I}E_{i}\neq \varnothing$ 矛盾。

**定理 15.3.14**

设 $(X,d)$ 是度量空间，$E\subset X$，如果 $E$ 是连通的，那么 $\overline{E}$ 是连通的。

**证明**

假设 $\overline{E}$ 不连通，那么存在 $\overline{E}$ 中的不相交非空开集 $U,V$ 使得 $U\cup V=\overline{E}$，令 $U'=E\cap U,V'=E\cap V$，那么 $U',V'$ 不相交，在 $E$ 中是开集，并且 $U'\cup V'=E$.

设 $x \in U$，则 $x \in E$ 或者 $x \in \partial E$. 如果 $x \in E$，那么 $U'$ 非空。如果 $x \in \partial E$，由于 $U$ 是开集，故存在开球 $B(x,r)\subset U$ 并且 $B(x,r)\cap E\neq \varnothing$，故存在 $x' \in E\cap U=U'$. 同理，$V'$ 是非空的，这表明 $E$ 不连通，矛盾。

**定理 15.3.15**

设 $(X,d)$ 是度量空间，$E\subset X$，如果对任意 $x,y \in E$，总存在连续函数 $\gamma\colon [0,1]\to E$ 满足 $\gamma(0)=x,\gamma(1)=y$，那么 $E$ 是连通的。

**证明**

假设 $E$ 不连通，那么有 $E$ 上不相交的开集 $U,V$ 使得 $E=U\cup V$，取 $x \in U,y \in V$，则有连续函数 $\gamma\colon [0,1]\to E$ 使得 $\gamma(0)=x,\gamma(1)=y$.

由于 $[0,1]$ 是连通集，故 $\gamma[0,1]$ 也是连通的，而 $\gamma[0,1]\cap U$ 和 $\gamma[0,1]\cap V$ 是 $\gamma[0,1]$ 上的非空开集，其并集为 $\gamma[0,1]$，这表明 $\gamma[0,1]$ 是不连通的，矛盾。

上面的定理给出了一个符合我们直观的连通性的描述：任意两点之间有连续曲线连接。遗憾的是，上述定理只是一个充分条件，事实上的确存在不满足“连续曲线连接”条件的连通集，尽管证明这一点比较困难。